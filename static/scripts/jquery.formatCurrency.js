!function($){$.fn.formatCurrency=function(settings){return settings=jQuery.extend({name:"formatCurrency",useHtml:!1,global:!0},settings),this.each(function(){var num="0";num=$(this)[settings.useHtml?"html":"val"](),num=num.replace(/\$|\,/g,""),isNaN(num)&&(num="0"),sign=num==(num=Math.abs(num)),num=Math.floor(100*num+.50000000001),cents=num%100,num=Math.floor(num/100).toString(),cents<10&&(cents="0"+cents);for(var i=0;i<Math.floor((num.length-(1+i))/3);i++)num=num.substring(0,num.length-(4*i+3))+wpi.thousandsSeparator+num.substring(num.length-(4*i+3));$(this)[settings.useHtml?"html":"val"]((sign?"":"-")+jQuery("<div/>").html(wpi.currency).text()+num+wpi.decimalSeparator+cents)})}}(jQuery);